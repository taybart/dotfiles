export DOTFILES="$HOME/.dotfiles"

function sife() { [ -f $1 ] && source $1 }
source $DOTFILES/shell/path.zsh


if ! type "nvim" > /dev/null; then
  export EDITOR=vim
  export MANPAGER="sh -c \"col -b | vim --not-a-term -c 'set ft=man ts=8 nomod nolist nonu' \
    -c 'nnoremap i <nop>' \
    -c 'nnoremap <Space> <C-f>' \
    -c 'noremap q :quit<CR>' -\""
else
  export EDITOR=nvim
  export MANPAGER='nvim +Man!'
fi

export FZF_DEFAULT_COMMAND='rg --files --hidden'

# -- Plugins --
if ! type "antibody" > /dev/null; then
  $DOTFILES/shell/get_antibody.sh -b $HOME/.local/bin
fi

# ohmyzsh/ohmyzsh
# ohmyzsh/ohmyzsh path:plugins/z
# ohmyzsh/ohmyzsh path:plugins/fzf
# ohmyzsh/ohmyzsh path:plugins/sudo
# ohmyzsh/ohmyzsh path:plugins/docker
# ohmyzsh/ohmyzsh path:plugins/docker-compose
# ohmyzsh/ohmyzsh path:plugins/kubectl
source <(antibody init)
antibody bundle <<BUNDLE
zsh-users/zsh-autosuggestions
zsh-users/zsh-syntax-highlighting
zsh-users/zsh-completions
BUNDLE

# # theme
# source $DOTFILES/shell/zsh-prompt.zsh-theme

# source if exists
function sife() { [ -f $1 ] && source $1 }

sife $DOTFILES/shell/z.sh
sife $DOTFILES/shell/alias.zsh
sife $DOTFILES/shell/functions.zsh
sife $DOTFILES/shell/pms.zsh
sife $DOTFILES/shell/op.zsh

# keybinds
bindkey '^E' autosuggest-accept
bindkey '^ ' forward-word
bindkey '^[[1;5C' forward-word                    # ctrl + ->
bindkey '^[[1;5D' backward-word                   # ctrl + <-
bindkey '^[[1;3C' forward-word                    # alt + ->
bindkey '^[[1;3D' backward-word                   # alt + <-

# Disable command auto-correction.
export ENABLE_CORRECTION=false
export DISABLE_AUTO_TITLE=true

autoload -U +X compinit && compinit
autoload -U +X bashcompinit && bashcompinit

if type starship >> /dev/null; then
  eval `starship init zsh`
else
  echo 'starship missing'
fi

# -- overrides --
sife $HOME/.zshrc.local
